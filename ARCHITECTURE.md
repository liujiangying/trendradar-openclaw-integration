# TrendRadar + OpenClaw é›†æˆæ¶æ„è®¾è®¡

## 1. æ¶æ„æ¦‚è§ˆ

### 1.1 ç³»ç»Ÿç»„æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      OpenClaw å¹³å°                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Cron å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚ è§¦å‘æ‰§è¡Œ                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          TrendRadar é›†æˆè„šæœ¬ (Python)               â”‚   â”‚
â”‚  â”‚  - è°ƒç”¨ TrendRadar MCP å·¥å…·                         â”‚   â”‚
â”‚  â”‚  - æ•°æ®è·å–ä¸å¤„ç†                                   â”‚   â”‚
â”‚  â”‚  - æ¶ˆæ¯æ ¼å¼åŒ–                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚ æ¨é€æ¶ˆæ¯                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         ä¼ä¸šå¾®ä¿¡æœºå™¨äºº (openclaw-wecom-bot)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  ä¼ä¸šå¾®ä¿¡ç¾¤èŠ   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒåŠŸèƒ½
- **å®šæ—¶è·å–çƒ­ç‚¹**: é€šè¿‡ OpenClaw cron å®šæ—¶è°ƒç”¨ TrendRadar MCP æœåŠ¡
- **æ™ºèƒ½ç­›é€‰**: åŸºäºå…³é”®è¯è¿‡æ»¤çƒ­ç‚¹æ–°é—»
- **æ¶ˆæ¯æ¨é€**: é€šè¿‡ä¼ä¸šå¾®ä¿¡æœºå™¨äººæ¨é€åˆ°æŒ‡å®šç¾¤èŠ
- **çµæ´»é…ç½®**: æ”¯æŒè‡ªå®šä¹‰æ¨é€æ—¶é—´ã€å…³é”®è¯ã€å¹³å°ç­‰

## 2. TrendRadar MCP æœåŠ¡åˆ†æ

### 2.1 MCP æœåŠ¡å®ç°
- **æ¡†æ¶**: FastMCP 2.0
- **ä¼ è¾“æ¨¡å¼**: stdio / HTTP
- **ä¸»è¦å·¥å…·ç±»**:
  - `DataQueryTools`: æ•°æ®æŸ¥è¯¢ï¼ˆæœ€æ–°æ–°é—»ã€æŒ‰æ—¥æœŸæŸ¥è¯¢ã€RSSç­‰ï¼‰
  - `AnalyticsTools`: æ•°æ®åˆ†æï¼ˆè¶‹åŠ¿åˆ†æã€æƒ…æ„Ÿåˆ†æç­‰ï¼‰
  - `SearchTools`: æœç´¢å·¥å…·ï¼ˆå…³é”®è¯æœç´¢ã€ç›¸å…³æ–°é—»ç­‰ï¼‰
  - `ConfigManagementTools`: é…ç½®ç®¡ç†
  - `SystemManagementTools`: ç³»ç»Ÿç®¡ç†
  - `StorageSyncTools`: å­˜å‚¨åŒæ­¥
  - `ArticleReaderTools`: æ–‡ç« é˜…è¯»

### 2.2 æ ¸å¿ƒ MCP å·¥å…·æ¥å£

#### 2.2.1 æ•°æ®æŸ¥è¯¢å·¥å…·
```python
# è·å–æœ€æ–°æ–°é—»
get_latest_news(
    platforms: Optional[List[str]] = None,
    limit: int = 50,
    include_url: bool = False
)

# è·å–çƒ­ç‚¹è¯é¢˜
get_trending_topics(
    date_range: Optional[Dict] = None,
    platforms: Optional[List[str]] = None,
    min_frequency: int = 2,
    top_n: int = 20
)

# è·å–æœ€æ–° RSS
get_latest_rss(
    feeds: Optional[List[str]] = None,
    limit: int = 50,
    include_url: bool = True
)
```

#### 2.2.2 æœç´¢å·¥å…·
```python
# æœç´¢æ–°é—»
search_news(
    keyword: str,
    search_in_rss: bool = True,
    date_range: Optional[Dict] = None,
    platforms: Optional[List[str]] = None,
    limit: int = 100
)
```

#### 2.2.3 æ—¥æœŸè§£æå·¥å…·
```python
# è§£ææ—¥æœŸèŒƒå›´
resolve_date_range(
    expression: str  # "ä»Šå¤©", "æ˜¨å¤©", "æœ¬å‘¨", "æœ€è¿‘7å¤©" ç­‰
)
```

### 2.3 æ•°æ®å­˜å‚¨ç»“æ„
- **çƒ­æ¦œæ•°æ®**: `output/news/YYYY-MM-DD/çƒ­æ¦œå¹³å°.json`
- **RSS æ•°æ®**: `output/rss/YYYY-MM-DD/RSSæºID.json`
- **é…ç½®æ–‡ä»¶**: `config/config.yaml`
- **å…³é”®è¯é…ç½®**: `config/frequency_words.txt`

## 3. é›†æˆæ–¹æ¡ˆè®¾è®¡

### 3.1 æ•°æ®æµè®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OpenClaw    â”‚
â”‚ Cron è§¦å‘   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å¯åŠ¨ TrendRadar MCP Server   â”‚
â”‚    (stdio æ¨¡å¼)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è°ƒç”¨ MCP å·¥å…·è·å–æ•°æ®        â”‚
â”‚    - get_latest_news()          â”‚
â”‚    - get_trending_topics()      â”‚
â”‚    - search_news(keywords)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æ•°æ®å¤„ç†ä¸æ ¼å¼åŒ–             â”‚
â”‚    - å…³é”®è¯è¿‡æ»¤                 â”‚
â”‚    - æ’åç­›é€‰                   â”‚
â”‚    - Markdown æ ¼å¼åŒ–            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ¨é€åˆ°ä¼ä¸šå¾®ä¿¡ç¾¤             â”‚
â”‚    (openclaw message send)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 API è°ƒç”¨æ–¹å¼

#### æ–¹å¼ä¸€ï¼šç›´æ¥è°ƒç”¨ MCP Server (æ¨è)
```python
# ä½¿ç”¨ FastMCP å®¢æˆ·ç«¯é€šè¿‡ stdio é€šä¿¡
from mcp import ClientSession, StdioServerParameters
from mcp.client.stdio import stdio_client

# å¯åŠ¨ MCP Server
server_params = StdioServerParameters(
    command="python",
    args=["-m", "trendradar.mcp_server"],
    env={"TRENDRADAR_ROOT": "/path/to/TrendRadar"}
)

async with stdio_client(server_params) as (read, write):
    async with ClientSession(read, write) as session:
        await session.initialize()
        result = await session.call_tool("get_latest_news", {"limit": 20})
```

#### æ–¹å¼äºŒï¼šå°è£…ä¸ºæœ¬åœ°æ¨¡å—
```python
# ç›´æ¥å¯¼å…¥ TrendRadar å·¥å…·ç±»
import sys
sys.path.insert(0, '/path/to/TrendRadar')

from mcp_server.tools.data_query import DataQueryTools
from mcp_server.tools.search_tools import SearchTools

tools = DataQueryTools(project_root="/path/to/TrendRadar")
news = tools.get_latest_news(limit=20)
```

### 3.3 æ¨é€æœºåˆ¶è®¾è®¡

#### 3.3.1 æ¨é€æ—¶æœº
- **å®šæ—¶æ¨é€**: æ¯å¤©å›ºå®šæ—¶é—´ï¼ˆå¦‚ 9:00, 12:00, 18:00ï¼‰
- **å®æ—¶ç›‘æ§**: æ¯å°æ—¶æ£€æŸ¥çƒ­ç‚¹å˜åŒ–
- **æŒ‰éœ€è§¦å‘**: æ‰‹åŠ¨è§¦å‘æ¨é€

#### 3.3.2 æ¨é€å†…å®¹
```markdown
ğŸ“° çƒ­ç‚¹æ–°é—»æ¨é€ (2026-02-08 22:00)

ğŸ”¥ çƒ­é—¨è¯é¢˜ TOP 5
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. [è¯é¢˜åç§°] (çƒ­åº¦: 152)
   ğŸ“± æŠ–éŸ³ #1 | ğŸ” ç™¾åº¦ #3
   
2. [è¯é¢˜åç§°] (çƒ­åº¦: 98)
   ğŸ“± çŸ¥ä¹ #2 | ğŸ” å¾®åš #5

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ å…³é”®è¯åŒ¹é…: AI, æ•°æ®è´¨é‡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Œ AI ç›¸å…³ (3æ¡)
â€¢ [æ ‡é¢˜] - çŸ¥ä¹ #1
â€¢ [æ ‡é¢˜] - æŠ–éŸ³ #5

ğŸ“Œ æ•°æ®è´¨é‡ ç›¸å…³ (2æ¡)
â€¢ [æ ‡é¢˜] - ç™¾åº¦ #2

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Powered by TrendRadar + OpenClaw
```

### 3.4 é…ç½®è®¾è®¡

#### 3.4.1 é…ç½®æ–‡ä»¶ç»“æ„ (config.yaml)
```yaml
# TrendRadar é…ç½®
trendradar:
  root_path: "/root/.openclaw/workspace/trendradar-integration/TrendRadar"
  mcp_mode: "stdio"  # stdio æˆ– http
  
# æ•°æ®æºé…ç½®
sources:
  platforms:
    - "zhihu"
    - "weibo"
    - "toutiao"
    - "baidu"
  rss_feeds:
    - "hacker-news"
    - "ruanyifeng"
  
# å…³é”®è¯é…ç½®
keywords:
  enabled: true
  groups:
    - name: "æŠ€æœ¯ç±»"
      words: ["AI", "æ•°æ®", "ç®—æ³•", "å¼€æº"]
    - name: "è´¨é‡å¹³å°"
      words: ["æ•°æ®è´¨é‡", "è´¨é‡ç®¡ç†", "è´¨é‡ç›‘æ§"]
  min_frequency: 2  # æœ€å°å‡ºç°é¢‘ç‡
  
# æ¨é€é…ç½®
push:
  enabled: true
  channel: "wecom"  # ä¼ä¸šå¾®ä¿¡
  target: "group-id-or-name"  # ç¾¤èŠIDæˆ–åç§°
  
  # æ¨é€æ—¶é—´çª—å£
  schedule:
    times: ["09:00", "12:00", "18:00"]  # å›ºå®šæ—¶é—´æ¨é€
    timezone: "Asia/Shanghai"
  
  # æ¶ˆæ¯æ ¼å¼é…ç½®
  format:
    max_items_per_keyword: 5  # æ¯ä¸ªå…³é”®è¯æœ€å¤šå±•ç¤ºæ¡æ•°
    show_ranking: true  # æ˜¾ç¤ºæ’å
    show_platform: true  # æ˜¾ç¤ºå¹³å°
    show_url: false  # æ˜¾ç¤ºé“¾æ¥
    
# è¿‡æ»¤é…ç½®
filters:
  rank_threshold: 10  # åªæ¨é€æ’åå‰Nçš„æ–°é—»
  min_hot_score: 0  # æœ€å°çƒ­åº¦
  exclude_keywords: ["å¹¿å‘Š", "è¥é”€"]  # æ’é™¤å…³é”®è¯
```

## 4. æŠ€æœ¯å®ç°è¦ç‚¹

### 4.1 MCP å®¢æˆ·ç«¯å®ç°
- ä½¿ç”¨ `mcp` Python åŒ…è¿›è¡Œ MCP åè®®é€šä¿¡
- æ”¯æŒå¼‚æ­¥è°ƒç”¨å’Œé”™è¯¯å¤„ç†
- å®ç°è¿æ¥æ± å’Œé‡è¯•æœºåˆ¶

### 4.2 æ•°æ®å¤„ç†
- JSON æ•°æ®è§£æå’Œæ¸…æ´—
- å…³é”®è¯åŒ¹é…ç®—æ³•ï¼ˆæ”¯æŒæ­£åˆ™å’Œæ¨¡ç³ŠåŒ¹é…ï¼‰
- å»é‡å’Œæ’åºé€»è¾‘

### 4.3 æ¶ˆæ¯æ ¼å¼åŒ–
- Markdown æ ¼å¼åŒ–
- Emoji è¡¨æƒ…æ”¯æŒ
- å­—ç¬¦é•¿åº¦æ§åˆ¶ï¼ˆä¼ä¸šå¾®ä¿¡é™åˆ¶ï¼‰

### 4.4 é”™è¯¯å¤„ç†
- MCP æœåŠ¡è¿æ¥å¤±è´¥å¤„ç†
- æ•°æ®è·å–è¶…æ—¶å¤„ç†
- æ¨é€å¤±è´¥é‡è¯•æœºåˆ¶
- æ—¥å¿—è®°å½•å’Œç›‘æ§

## 5. éƒ¨ç½²æ¶æ„

### 5.1 ç›®å½•ç»“æ„
```
/root/.openclaw/workspace/trendradar-integration/
â”œâ”€â”€ TrendRadar/              # TrendRadar ä»“åº“ï¼ˆgit cloneï¼‰
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ config.yaml
â”‚   â”‚   â””â”€â”€ frequency_words.txt
â”‚   â”œâ”€â”€ mcp_server/
â”‚   â”œâ”€â”€ trendradar/
â”‚   â””â”€â”€ output/              # æ•°æ®å­˜å‚¨ç›®å½•
â”œâ”€â”€ src/                     # é›†æˆä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ mcp_client.py       # MCP å®¢æˆ·ç«¯å°è£…
â”‚   â”œâ”€â”€ data_processor.py   # æ•°æ®å¤„ç†
â”‚   â”œâ”€â”€ formatter.py        # æ¶ˆæ¯æ ¼å¼åŒ–
â”‚   â”œâ”€â”€ pusher.py           # æ¨é€é€»è¾‘
â”‚   â””â”€â”€ main.py             # ä¸»å…¥å£
â”œâ”€â”€ config.yaml             # é›†æˆé…ç½®
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ README.md              # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ progress.md            # è¿›åº¦æŠ¥å‘Š
â””â”€â”€ tests/                 # æµ‹è¯•ä»£ç 
    â””â”€â”€ test_integration.py
```

### 5.2 OpenClaw Cron é…ç½®
```bash
# æ¯å¤© 9:00, 12:00, 18:00 æ¨é€çƒ­ç‚¹
openclaw cron add "trendradar-push" \
  --schedule "0 9,12,18 * * *" \
  --command "cd /root/.openclaw/workspace/trendradar-integration && python src/main.py" \
  --timezone "Asia/Shanghai"
```

## 6. ä¼˜åŠ¿ä¸ç‰¹è‰²

### 6.1 æŠ€æœ¯ä¼˜åŠ¿
- âœ… **æ ‡å‡†åŒ–**: åŸºäº MCP åè®®ï¼Œç¬¦åˆå·¥ä¸šæ ‡å‡†
- âœ… **æ¨¡å—åŒ–**: æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œæ˜“äºç»´æŠ¤
- âœ… **å¯æ‰©å±•**: æ”¯æŒæ·»åŠ æ–°æ•°æ®æºå’Œæ¨é€æ¸ é“
- âœ… **é«˜æ€§èƒ½**: å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒå¹¶å‘

### 6.2 ç”¨æˆ·ä½“éªŒ
- âœ… **æ™ºèƒ½è¿‡æ»¤**: åŸºäºå…³é”®è¯å’Œçƒ­åº¦æ™ºèƒ½ç­›é€‰
- âœ… **çµæ´»é…ç½®**: YAML é…ç½®æ–‡ä»¶ï¼Œæ˜“äºè°ƒæ•´
- âœ… **åŠæ—¶æ¨é€**: å®šæ—¶ä»»åŠ¡ä¿è¯æ¶ˆæ¯åŠæ—¶æ€§
- âœ… **ç¾è§‚å±•ç¤º**: Markdown æ ¼å¼ï¼Œé˜…è¯»ä½“éªŒå¥½

## 7. åç»­æ‰©å±•æ–¹å‘

### 7.1 åŠŸèƒ½æ‰©å±•
- [ ] æ”¯æŒå¤šä¸ªæ¨é€æ¸ é“ï¼ˆé’‰é’‰ã€é£ä¹¦ç­‰ï¼‰
- [ ] æ·»åŠ  AI åˆ†æåŠŸèƒ½ï¼ˆæƒ…æ„Ÿåˆ†æã€è¶‹åŠ¿é¢„æµ‹ï¼‰
- [ ] æ”¯æŒè‡ªå®šä¹‰æ¨é€æ¨¡æ¿
- [ ] æ·»åŠ  Web æ§åˆ¶å°

### 7.2 æ€§èƒ½ä¼˜åŒ–
- [ ] æœ¬åœ°ç¼“å­˜æœºåˆ¶
- [ ] å¢é‡æ›´æ–°é€»è¾‘
- [ ] å¹¶å‘è¯·æ±‚ä¼˜åŒ–

### 7.3 ç›‘æ§ä¸è¿ç»´
- [ ] æ¨é€æˆåŠŸç‡ç›‘æ§
- [ ] é”™è¯¯å‘Šè­¦æœºåˆ¶
- [ ] æ—¥å¿—åˆ†æå’Œå¯è§†åŒ–
